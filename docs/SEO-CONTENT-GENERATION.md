# SEO å†…å®¹æ™ºèƒ½ç”Ÿæˆç³»ç»Ÿ - å®Œæ•´å®æ–½æ–¹æ¡ˆ

## ğŸ“‹ æ–‡æ¡£æ¦‚è§ˆ

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº† RunGame é¡¹ç›®çš„ SEO å†…å®¹æ™ºèƒ½ç”Ÿæˆç³»ç»Ÿçš„å®Œæ•´å®æ–½æ–¹æ¡ˆã€‚

**åˆ›å»ºæ—¶é—´**: 2025-01-21
**ç‰ˆæœ¬**: v1.0
**çŠ¶æ€**: å¾…å®æ–½

---

## ğŸ¯ ç³»ç»Ÿç›®æ ‡

ä¸ºæ¸¸æˆç”Ÿæˆé«˜è´¨é‡çš„ SEO ä¼˜åŒ–å†…å®¹ï¼ŒåŸºäº Google æœç´¢æ’åå‰ 5 çš„ç«å“åˆ†æã€‚

### æ ¸å¿ƒåŠŸèƒ½

1. **Google æœç´¢é›†æˆ** - è·å–ä¸»å…³é”®è¯çš„ SEO æ’åå‰ 5 ç½‘é¡µ
2. **æ™ºèƒ½ç½‘é¡µè§£æ** - ä½¿ç”¨ Jina AI Reader æå–ç½‘é¡µæ ¸å¿ƒå†…å®¹
3. **åŒæ¨¡å¼ç”Ÿæˆ** - å¿«é€Ÿæ¨¡å¼ï¼ˆå•æ­¥ï¼‰å’Œè´¨é‡æ¨¡å¼ï¼ˆä¸¤æ­¥ï¼‰
4. **ç«å“åˆ†æ** - æ·±åº¦åˆ†æç«å“çš„å…³é”®è¯ç­–ç•¥å’Œå†…å®¹ç»“æ„
5. **SEO ä¼˜åŒ–** - è‡ªåŠ¨ä¼˜åŒ–å…³é”®è¯å¯†åº¦ã€å†…å®¹ç»“æ„å’Œæ ‡ç­¾ä½¿ç”¨

---

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯æ–¹æ¡ˆ | è¯´æ˜ |
|------|---------|------|
| **æœç´¢å¼•æ“** | Google Custom Search API | ç²¾å‡†çš„ SEO æ’åæ•°æ® |
| **ç½‘é¡µè§£æ** | Jina AI Reader API | å°†ç½‘é¡µè½¬ä¸º Markdown |
| **AI æ¨¡å‹** | OpenRouter (å¤šæ¨¡å‹) | çµæ´»çš„ AI é€‰æ‹© |
| **æ•°æ®å­˜å‚¨** | PostgreSQL (Prisma) | ä¿å­˜å†å²å’Œåˆ†æ |

### æ•°æ®æµæ¶æ„

```
ç”¨æˆ·è¾“å…¥ (ä¸»/å‰¯å…³é”®è¯ + åŸå§‹ä¿¡æ¯)
    â†“
Google Search API (1ç§’) - è·å–æ’åå‰ 5 çš„ URL
    â†“
Jina Reader API (3ç§’ï¼Œå¹¶è¡Œ Ã— 5) - è§£æç½‘é¡µä¸º Markdown
    â†“
[åˆ†æ”¯]
    â”œâ”€ å¿«é€Ÿæ¨¡å¼: AI å•æ¬¡ç”Ÿæˆ (5-8ç§’) â†’ ç»“æœ
    â””â”€ è´¨é‡æ¨¡å¼: AI åˆ†æ (4-6ç§’) â†’ AI ç”Ÿæˆ (4-6ç§’) â†’ ç»“æœ
    â†“
è¿”å›: å†…å®¹ + SEO åˆ†æ + ç«å“æŠ¥å‘Š
```

---

## ğŸ“Š åŒæ¨¡å¼å¯¹æ¯”

### âš¡ å¿«é€Ÿæ¨¡å¼ (Fast Mode)

**ç‰¹ç‚¹**:
- å•æ¬¡ AI è°ƒç”¨ï¼Œç›´æ¥ç”Ÿæˆæ‰€æœ‰å†…å®¹
- é€Ÿåº¦å¿«ï¼Œæˆæœ¬ä½
- é€‚åˆå¿«é€Ÿé¢„è§ˆå’Œç®€å•æ¸¸æˆ

**æŠ€æœ¯ç»†èŠ‚**:
- è€—æ—¶: 9-12 ç§’
- æˆæœ¬: ~$0.05/æ¬¡
- API è°ƒç”¨: 1 æ¬¡
- å¤æ‚åº¦: ä½

### ğŸ¯ è´¨é‡æ¨¡å¼ (Quality Mode)

**ç‰¹ç‚¹**:
- ä¸¤æ­¥ç”Ÿæˆï¼šå…ˆåˆ†æç«å“ï¼Œå†ç”Ÿæˆå†…å®¹
- SEO æ•ˆæœæœ€ä½³ï¼Œè´¨é‡æ›´ç¨³å®š
- æä¾›è¯¦ç»†çš„ç«å“åˆ†ææŠ¥å‘Š

**æŠ€æœ¯ç»†èŠ‚**:
- è€—æ—¶: 12-16 ç§’
- æˆæœ¬: ~$0.10/æ¬¡
- API è°ƒç”¨: 2 æ¬¡
- å¤æ‚åº¦: ä¸­

### å¯¹æ¯”è¡¨

| ç»´åº¦ | å¿«é€Ÿæ¨¡å¼ | è´¨é‡æ¨¡å¼ |
|------|---------|---------|
| é€Ÿåº¦ | âš¡âš¡âš¡ 9-12ç§’ | âš¡âš¡ 12-16ç§’ |
| æˆæœ¬ | ğŸ’° $0.05 | ğŸ’°ğŸ’° $0.10 |
| è´¨é‡ | â­â­â­â­ | â­â­â­â­â­ |
| åˆ†ææ·±åº¦ | â­â­â­ | â­â­â­â­â­ |
| ç¨³å®šæ€§ | â­â­â­ | â­â­â­â­â­ |
| å¯è°ƒè¯•æ€§ | â­â­ | â­â­â­â­â­ |

---

## ğŸ”§ ç¯å¢ƒé…ç½®

### å¿…éœ€çš„ç¯å¢ƒå˜é‡

```bash
# .env.local

# Google Custom Search API (å¿…éœ€)
GOOGLE_SEARCH_API_KEY=your_google_api_key_here
GOOGLE_SEARCH_ENGINE_ID=your_search_engine_id_here

# Jina AI Reader (å¯é€‰ï¼Œæé«˜é€Ÿç‡é™åˆ¶)
JINA_API_KEY=your_jina_api_key_here

# OpenRouter AI (å·²æœ‰)
OPENROUTER_API_KEY=your_openrouter_key_here
```

### Google API ç”³è¯·æ­¥éª¤

1. **åˆ›å»ºé¡¹ç›®**
   - è®¿é—®: https://console.cloud.google.com/
   - åˆ›å»ºæ–°é¡¹ç›®æˆ–é€‰æ‹©ç°æœ‰é¡¹ç›®

2. **å¯ç”¨ Custom Search API**
   - è®¿é—®: https://console.cloud.google.com/apis/library
   - æœç´¢ "Custom Search API"
   - ç‚¹å‡»å¯ç”¨

3. **åˆ›å»º API Key**
   - è®¿é—®: https://console.cloud.google.com/apis/credentials
   - åˆ›å»ºå‡­æ® â†’ API å¯†é’¥
   - å¤åˆ¶ API Key

4. **åˆ›å»º Custom Search Engine**
   - è®¿é—®: https://programmablesearchengine.google.com/
   - ç‚¹å‡» "Add" åˆ›å»ºæ–°æœç´¢å¼•æ“
   - é…ç½®:
     - æœç´¢èŒƒå›´: "æœç´¢æ•´ä¸ªç½‘ç»œ"
     - è¯­è¨€: æ ¹æ®éœ€è¦è®¾ç½®
   - è·å– Search Engine ID (cx å‚æ•°)

5. **æˆæœ¬è¯´æ˜**
   - å…è´¹é¢åº¦: 100 æ¬¡/å¤©
   - ä»˜è´¹ä»·æ ¼: $5/1000 æ¬¡
   - å»ºè®®: å¼€å‘ç¯å¢ƒä½¿ç”¨å…è´¹é¢åº¦ï¼Œç”Ÿäº§ç¯å¢ƒè€ƒè™‘ä»˜è´¹

### Jina API Key (å¯é€‰)

1. è®¿é—®: https://jina.ai/reader
2. æ³¨å†Œè´¦å·
3. è·å– API Key
4. å…è´¹ç‰ˆè¶³å¤Ÿä½¿ç”¨ï¼ŒAPI Key å¯æé«˜é€Ÿç‡é™åˆ¶

---

## ğŸ“ API æ¥å£è®¾è®¡

### è¯·æ±‚ç«¯ç‚¹

```
POST /api/ai/batch-generate-seo
```

### è¯·æ±‚å‚æ•°

```typescript
{
  // ç”Ÿæˆæ¨¡å¼
  mode: 'fast' | 'quality',  // é»˜è®¤ 'quality'

  // æ¸¸æˆä¿¡æ¯
  gameId?: string,
  gameTitle: string,
  locale: 'en' | 'zh' | 'es' | 'fr',

  // SEO å…³é”®è¯
  mainKeyword: string,        // ä¸»å…³é”®è¯ (å¿…éœ€)
  subKeywords: string[],      // å‰¯å…³é”®è¯ 5-20 ä¸ª (å¿…éœ€)

  // åŸå§‹æ¸¸æˆä¿¡æ¯
  originalGameInfo: {
    description?: string,
    howToPlay?: string,
    controls?: string,
    category?: string,
    tags?: string[],
    publisher?: string,
    // ... å…¶ä»–å­—æ®µ
  },

  // ç”Ÿæˆé…ç½®
  fields: ['controls', 'howToPlay', 'gameDetails', 'extras'],
  model?: string,  // AI æ¨¡å‹ ID (å¯é€‰)

  // SEO é…ç½® (å¯é€‰)
  seoConfig?: {
    topPagesCount?: number,  // é»˜è®¤ 5
    targetWordCount?: {
      controls?: number,      // é»˜è®¤ 120(en)/72(zh)
      howToPlay?: number,     // é»˜è®¤ 280/168
      gameDetails?: number,   // é»˜è®¤ 350/210
      extras?: number         // é»˜è®¤ 180/108
    }
  }
}
```

### å“åº”ç»“æœ

```typescript
{
  success: boolean,
  mode: 'fast' | 'quality',

  // ç”Ÿæˆçš„å†…å®¹
  results: {
    controls: string,      // HTML æ ¼å¼
    howToPlay: string,
    gameDetails: string,
    extras: string
  },

  // SEO å…ƒæ•°æ®
  seoMetadata: {
    mainKeyword: string,
    mainKeywordCount: {
      controls: number,
      howToPlay: number,
      gameDetails: number,
      extras: number,
      total: number
    },
    mainKeywordDensity: string,  // "2.5%"
    subKeywordsUsed: string[],
    totalWordCount: number,
    estimatedReadingTime: number
  },

  // Google æœç´¢ç»“æœ
  googleSearchResults: Array<{
    rank: number,
    title: string,
    url: string,
    snippet: string
  }>,

  // ç«å“å†…å®¹
  competitorPages: Array<{
    rank: number,
    url: string,
    title: string,
    wordCount: number,
    content: string,  // Markdown
    error?: string
  }>,

  // ç«å“åˆ†æ (ä»…è´¨é‡æ¨¡å¼)
  competitorAnalysis?: {
    competitors: [...],
    commonPatterns: {...},
    recommendations: {...}
  },

  // æ€§èƒ½ç»Ÿè®¡
  performance: {
    searchTime: number,
    parseTime: number,
    analysisTime?: number,
    generationTime: number,
    totalTime: number
  }
}
```

---

## ğŸ’» ä»£ç å®ç°æ¸…å•

### æ–°å¢æ–‡ä»¶

```
lib/
â”œâ”€â”€ google-search.ts       # Google æœç´¢ API é›†æˆ
â”œâ”€â”€ jina-reader.ts         # Jina Reader API é›†æˆ
â””â”€â”€ seo-helpers.ts         # SEO è¾…åŠ©å‡½æ•°

app/api/ai/
â””â”€â”€ batch-generate-seo/
    â””â”€â”€ route.ts           # SEO ç”Ÿæˆä¸» API

components/admin/games/
â””â”€â”€ BatchGenerateDialog.tsx  # æ›´æ–°ï¼šæ·»åŠ  SEO æ¨¡å¼
```

### ä¿®æ”¹æ–‡ä»¶

```
.env.local                 # æ·»åŠ æ–°çš„ç¯å¢ƒå˜é‡
package.json              # æ— éœ€æ–°å¢ä¾èµ–
```

### åˆ é™¤æ–‡ä»¶

```
app/api/ai/
â”œâ”€â”€ batch-generate-with-tools/     # åˆ é™¤ï¼šTool Calling æ–¹æ¡ˆ
â””â”€â”€ batch-generate-with-web-search/ # é‡æ„ä¸º SEO æ–¹æ¡ˆ
```

---

## ğŸš€ å®æ–½æ­¥éª¤

### é˜¶æ®µ 1: åŸºç¡€åº“å®ç° (Day 1)

#### 1.1 å®ç° Google Search

**æ–‡ä»¶**: `lib/google-search.ts`

**æ ¸å¿ƒå‡½æ•°**:
```typescript
export async function searchGoogleTopPages(
  keyword: string,
  topN: number = 5,
  locale: string = 'en'
): Promise<GoogleSearchResult[]>
```

**æµ‹è¯•è¦ç‚¹**:
- [ ] èƒ½æ­£ç¡®è°ƒç”¨ Google API
- [ ] è¿”å›æ­£ç¡®æ•°é‡çš„ç»“æœ
- [ ] è¯­è¨€è¿‡æ»¤æ­£å¸¸å·¥ä½œ
- [ ] é”™è¯¯å¤„ç†å®Œå–„

#### 1.2 å®ç° Jina Reader

**æ–‡ä»¶**: `lib/jina-reader.ts`

**æ ¸å¿ƒå‡½æ•°**:
```typescript
export async function readWebPage(url: string): Promise<JinaReaderResult>
export async function readMultiplePages(urls: string[]): Promise<JinaReaderResult[]>
```

**æµ‹è¯•è¦ç‚¹**:
- [ ] èƒ½æ­£ç¡®è§£æç½‘é¡µ
- [ ] è¿”å› Markdown æ ¼å¼
- [ ] å¹¶è¡Œå¤„ç†æ­£å¸¸
- [ ] è¶…æ—¶å’Œé”™è¯¯å¤„ç†

#### 1.3 å®ç° SEO è¾…åŠ©å‡½æ•°

**æ–‡ä»¶**: `lib/seo-helpers.ts`

**æ ¸å¿ƒå‡½æ•°**:
```typescript
export function getTargetWordCount(baseCount: number, locale: string): number
export function getDefaultWordCount(locale: string): object
export function analyzeSeoMetadata(results, mainKeyword, subKeywords): object
export function getLanguageName(locale: string): string
```

**æµ‹è¯•è¦ç‚¹**:
- [ ] å­—æ•°è®¡ç®—å‡†ç¡®
- [ ] SEO åˆ†ææ­£ç¡®
- [ ] å¤šè¯­è¨€æ”¯æŒå®Œæ•´

---

### é˜¶æ®µ 2: å¿«é€Ÿæ¨¡å¼å®ç° (Day 2)

#### 2.1 å®ç°å•æ­¥ç”Ÿæˆ API

**æ–‡ä»¶**: `app/api/ai/batch-generate-seo/route.ts`

**æ ¸å¿ƒé€»è¾‘**:
```typescript
async function generateInOneStep(params) {
  // 1. æ„å»ºåŒ…å«æ‰€æœ‰ç«å“å†…å®¹çš„ System Prompt
  // 2. ä¸€æ¬¡æ€§è°ƒç”¨ AI ç”Ÿæˆæ‰€æœ‰å­—æ®µ
  // 3. è¿”å›ç»“æœ
}
```

**Prompt è®¾è®¡è¦ç‚¹**:
- æ¸…æ™°çš„ SEO è¦æ±‚ï¼ˆå…³é”®è¯å¯†åº¦ã€ä½ç½®ï¼‰
- å®Œæ•´çš„ç«å“å†…å®¹ï¼ˆMarkdown æ ¼å¼ï¼‰
- æ˜ç¡®çš„è¾“å‡ºæ ¼å¼ï¼ˆJSONï¼‰
- å­—æ•°å’Œç»“æ„è¦æ±‚

#### 2.2 æµ‹è¯•å¿«é€Ÿæ¨¡å¼

**æµ‹è¯•ç”¨ä¾‹**:
```typescript
{
  mode: 'fast',
  gameTitle: 'Test Puzzle Game',
  locale: 'en',
  mainKeyword: 'puzzle game',
  subKeywords: ['brain teaser', 'logic', 'strategy', 'casual', 'thinking'],
  originalGameInfo: {
    description: 'A challenging puzzle game',
    category: 'Puzzle'
  },
  fields: ['controls', 'howToPlay', 'gameDetails', 'extras']
}
```

**éªŒè¯ç‚¹**:
- [ ] Google æœç´¢æˆåŠŸ
- [ ] Jina è§£ææˆåŠŸ
- [ ] AI ç”ŸæˆæˆåŠŸ
- [ ] è¿”å›æ ¼å¼æ­£ç¡®
- [ ] SEO å…ƒæ•°æ®å‡†ç¡®
- [ ] è€—æ—¶åœ¨ 9-12 ç§’å†…

---

### é˜¶æ®µ 3: è´¨é‡æ¨¡å¼å®ç° (Day 3)

#### 3.1 å®ç°ä¸¤æ­¥ç”Ÿæˆ API

**æ ¸å¿ƒé€»è¾‘**:
```typescript
async function generateInTwoSteps(params) {
  // æ­¥éª¤ 1: åˆ†æç«å“
  const analysis = await analyzeCompetitors(params)

  // æ­¥éª¤ 2: åŸºäºåˆ†æç”Ÿæˆå†…å®¹
  const content = await generateFromAnalysis(params, analysis)

  return { results: content, analysis }
}
```

**åˆ†æ Prompt è®¾è®¡**:
- è¦æ±‚ AI æ·±åº¦åˆ†ææ¯ä¸ªç«å“
- æå–å…³é”®è¯ç­–ç•¥ã€å†…å®¹ç»“æ„ã€ç‹¬ç‰¹å–ç‚¹
- æ‰¾å‡ºå…±åŒçš„æˆåŠŸæ¨¡å¼
- æä¾›ç»“æ„åŒ–çš„ JSON æŠ¥å‘Š

**ç”Ÿæˆ Prompt è®¾è®¡**:
- åŸºäºåˆ†ææŠ¥å‘Šçš„å»ºè®®
- ä¸¥æ ¼éµå¾ªå‘ç°çš„æˆåŠŸæ¨¡å¼
- åŠ å…¥ç‹¬ç‰¹è§’åº¦
- ç¡®ä¿è´¨é‡è¶…è¶Šç«å“

#### 3.2 æµ‹è¯•è´¨é‡æ¨¡å¼

**æµ‹è¯•ç”¨ä¾‹**: åŒå¿«é€Ÿæ¨¡å¼ï¼Œåªä¿®æ”¹ `mode: 'quality'`

**éªŒè¯ç‚¹**:
- [ ] ç¬¬ä¸€æ­¥åˆ†ææˆåŠŸ
- [ ] åˆ†ææŠ¥å‘Šæ ¼å¼æ­£ç¡®
- [ ] ç¬¬äºŒæ­¥ç”ŸæˆæˆåŠŸ
- [ ] å†…å®¹è´¨é‡æ˜æ˜¾æ›´å¥½
- [ ] è¿”å›åŒ…å«åˆ†ææŠ¥å‘Š
- [ ] è€—æ—¶åœ¨ 12-16 ç§’å†…

---

### é˜¶æ®µ 4: å‰ç«¯é›†æˆ (Day 4)

#### 4.1 æ›´æ–° BatchGenerateDialog

**æ–‡ä»¶**: `components/admin/games/BatchGenerateDialog.tsx`

**æ–°å¢åŠŸèƒ½**:
1. ç”Ÿæˆæ¨¡å¼é€‰æ‹© (RadioGroup)
   - å¿«é€Ÿæ¨¡å¼
   - è´¨é‡æ¨¡å¼ï¼ˆæ¨èï¼‰

2. å…³é”®è¯è¾“å…¥
   - ä¸»å…³é”®è¯ï¼ˆå¿…å¡«ï¼‰
   - å‰¯å…³é”®è¯ï¼ˆè‡³å°‘ 5 ä¸ªï¼Œé€—å·åˆ†éš”ï¼‰

3. ç»“æœå±•ç¤º
   - SEO åˆ†ææŠ¥å‘Š
   - ç«å“åˆ†ææŠ¥å‘Šï¼ˆè´¨é‡æ¨¡å¼ï¼‰
   - æ€§èƒ½ç»Ÿè®¡

**UI æ”¹è¿›**:
- [ ] æ·»åŠ æ¨¡å¼é€‰æ‹© UI
- [ ] æ·»åŠ å…³é”®è¯è¾“å…¥åŒºåŸŸ
- [ ] æ·»åŠ  SEO åˆ†æå±•ç¤º
- [ ] æ·»åŠ ç«å“åˆ†æå±•ç¤º
- [ ] æ·»åŠ åŠ è½½è¿›åº¦æç¤º

#### 4.2 API è°ƒç”¨é›†æˆ

```typescript
const response = await fetch('/api/ai/batch-generate-seo', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    mode: generationMode,
    gameTitle,
    locale,
    mainKeyword,
    subKeywords: subKeywordsList,
    originalGameInfo,
    fields,
    model: selectedModel
  })
})
```

---

### é˜¶æ®µ 5: æµ‹è¯•å’Œä¼˜åŒ– (Day 5-6)

#### 5.1 åŠŸèƒ½æµ‹è¯•

**æµ‹è¯•çŸ©é˜µ**:

| åœºæ™¯ | æ¨¡å¼ | è¯­è¨€ | é¢„æœŸç»“æœ |
|------|------|------|---------|
| çƒ­é—¨æ¸¸æˆ | Fast | EN | æ‰¾åˆ° 5 ä¸ªç«å“ï¼Œç”ŸæˆæˆåŠŸ |
| çƒ­é—¨æ¸¸æˆ | Quality | EN | æ‰¾åˆ° 5 ä¸ªç«å“ï¼Œæœ‰åˆ†ææŠ¥å‘Š |
| å†·é—¨æ¸¸æˆ | Fast | EN | å¯èƒ½åªæœ‰ 2-3 ä¸ªç«å“ |
| ä¸­æ–‡æ¸¸æˆ | Quality | ZH | ä¸­æ–‡æœç´¢å’Œç”Ÿæˆ |
| é”™è¯¯å…³é”®è¯ | Fast | EN | å‹å¥½çš„é”™è¯¯æç¤º |

**è¾¹ç•Œæµ‹è¯•**:
- [ ] ä¸»å…³é”®è¯ä¸ºç©º
- [ ] å‰¯å…³é”®è¯å°‘äº 5 ä¸ª
- [ ] Google API å¤±è´¥
- [ ] Jina è§£æå¤±è´¥
- [ ] AI è°ƒç”¨å¤±è´¥
- [ ] ç½‘ç»œè¶…æ—¶

#### 5.2 æ€§èƒ½ä¼˜åŒ–

**ä¼˜åŒ–ç‚¹**:
1. Jina Reader å¹¶å‘æ§åˆ¶ï¼ˆæ¯æ‰¹ 3 ä¸ªï¼‰
2. å†…å®¹é•¿åº¦é™åˆ¶ï¼ˆ5000 å­—ç¬¦ï¼‰
3. AI Prompt é•¿åº¦ä¼˜åŒ–
4. é”™è¯¯é‡è¯•æœºåˆ¶
5. ç¼“å­˜æœºåˆ¶ï¼ˆå¯é€‰ï¼‰

**æ€§èƒ½ç›®æ ‡**:
- [ ] å¿«é€Ÿæ¨¡å¼ < 12 ç§’
- [ ] è´¨é‡æ¨¡å¼ < 16 ç§’
- [ ] å†…å­˜ä½¿ç”¨ < 512MB
- [ ] å¹¶å‘æ”¯æŒ 5 ä¸ªè¯·æ±‚

---

## ğŸ“Š Prompt æ¨¡æ¿

### å¿«é€Ÿæ¨¡å¼ System Prompt

```markdown
ä½ æ˜¯ä¸–ç•Œé¡¶çº§çš„ SEO å†…å®¹ä¼˜åŒ–ä¸“å®¶å’Œæ¸¸æˆå†…å®¹åˆ›ä½œè€…ã€‚

# æ ¸å¿ƒä»»åŠ¡
ä¸ºæ¸¸æˆ"${gameTitle}"ç”Ÿæˆ SEO ä¼˜åŒ–çš„å†…å®¹ï¼ˆ${locale}ï¼‰ã€‚

# SEO ç­–ç•¥
**ä¸»å…³é”®è¯**: "${mainKeyword}"
- å¯†åº¦: 2-3%
- å¿…é¡»åœ¨ç¬¬ä¸€æ®µå‡ºç°
- æ€»å…±å‡ºç°çº¦ ${targetCount} æ¬¡

**å‰¯å…³é”®è¯**: ${subKeywords.join(', ')}
- æ€»å¯†åº¦: 3-5%
- æ™ºèƒ½åˆ†å¸ƒåœ¨å„å­—æ®µ
- æ¯ä¸ªè‡³å°‘ 1-2 æ¬¡

# ç«å“å†…å®¹

## ç«å“ 1: ${page1.title}
URL: ${page1.url}
å­—æ•°: ${page1.wordCount}

${page1.content}

---

[å…¶ä»–ç«å“...]

# åŸå§‹æ¸¸æˆä¿¡æ¯
${JSON.stringify(originalGameInfo)}

# ç”Ÿæˆå­—æ®µ
- controls (${wordCount.controls}è¯): æ“ä½œæ§åˆ¶è¯´æ˜
- howToPlay (${wordCount.howToPlay}è¯): ç©æ³•è§„åˆ™
- gameDetails (${wordCount.gameDetails}è¯): æ¸¸æˆç‰¹è‰²
- extras (${wordCount.extras}è¯): æŠ€å·§å’ŒFAQ

# å†…å®¹è¦æ±‚
1. å‚è€ƒç«å“ç»“æ„ä½†ä¿æŒåŸåˆ›
2. å…³é”®è¯è‡ªç„¶èå…¥ï¼Œä¸å †ç Œ
3. ä½¿ç”¨ HTML æ ‡ç­¾ä¼˜åŒ–ï¼ˆ<p>, <ul>, <strong>, <h3>ï¼‰
4. å†…å®¹æœ‰ä»·å€¼ï¼Œè¶…è¶Šç«å“
5. ç¬¦åˆç›®æ ‡å­—æ•°

# è¾“å‡ºæ ¼å¼
è¿”å› JSON:
```json
{
  "controls": "<p>...</p>",
  "howToPlay": "<p>...</p><ul><li>...</li></ul>",
  "gameDetails": "<h3>...</h3><p>...</p>",
  "extras": "<p>...</p>"
}
```
```

### è´¨é‡æ¨¡å¼ - åˆ†æ Prompt

```markdown
ä½ æ˜¯ä¸“ä¸šçš„ SEO å†…å®¹åˆ†æå¸ˆã€‚

# ä»»åŠ¡
æ·±åº¦åˆ†æä»¥ä¸‹ 5 ä¸ªç«å“ç½‘é¡µçš„ SEO ç­–ç•¥ã€‚

# åˆ†æç›®æ ‡
ä¸»å…³é”®è¯: "${mainKeyword}"
å‰¯å…³é”®è¯: ${subKeywords.join(', ')}

# ç«å“å†…å®¹
[åŒå¿«é€Ÿæ¨¡å¼]

# åˆ†æè¦æ±‚

å¯¹æ¯ä¸ªç«å“æå–ï¼š

1. **å…³é”®è¯ç­–ç•¥**
   - ä¸»å…³é”®è¯å‡ºç°æ¬¡æ•°å’Œä½ç½®
   - å…³é”®è¯å¯†åº¦
   - å‰¯å…³é”®è¯ä½¿ç”¨æƒ…å†µ

2. **å†…å®¹ç»“æ„**
   - æ ‡é¢˜å±‚çº§å’Œç»„ç»‡
   - æ®µè½æ•°é‡å’Œé•¿åº¦
   - åˆ—è¡¨å’Œè¡¨æ ¼ä½¿ç”¨

3. **å†…å®¹è´¨é‡**
   - ç‹¬ç‰¹å–ç‚¹
   - æœ‰ä»·å€¼çš„ä¿¡æ¯
   - è¯­è¨€é£æ ¼

4. **SEO æŠ€å·§**
   - HTML æ ‡ç­¾ä½¿ç”¨
   - å†…é“¾ç­–ç•¥
   - ç»“æ„åŒ–æ•°æ®

# è¾“å‡ºæ ¼å¼
è¿”å›è¯¦ç»†çš„ JSON åˆ†ææŠ¥å‘Šï¼ˆè§æ¥å£è®¾è®¡ï¼‰
```

### è´¨é‡æ¨¡å¼ - ç”Ÿæˆ Prompt

```markdown
ä½ æ˜¯ä¸–ç•Œé¡¶çº§çš„ SEO å†…å®¹åˆ›ä½œè€…ã€‚

# ä»»åŠ¡
åŸºäºç«å“åˆ†ææŠ¥å‘Šï¼Œä¸ºæ¸¸æˆ"${gameTitle}"ç”Ÿæˆ SEO ä¼˜åŒ–å†…å®¹ã€‚

# ç«å“åˆ†ææŠ¥å‘Š
${JSON.stringify(analysis, null, 2)}

# å…³é”®æ´å¯Ÿ
ä»åˆ†æä¸­å‘ç°çš„æˆåŠŸæ¨¡å¼ï¼š
- ${successFactors.join('\n- ')}

æ¨èçš„ç‹¬ç‰¹è§’åº¦ï¼š
- ${uniqueAngles.join('\n- ')}

# åŸå§‹æ¸¸æˆä¿¡æ¯
${JSON.stringify(originalGameInfo)}

# ç”Ÿæˆè¦æ±‚
ä¸¥æ ¼éµå¾ªåˆ†ææŠ¥å‘Šçš„å»ºè®®ï¼š
1. ä½¿ç”¨å‘ç°çš„æˆåŠŸç»“æ„æ¨¡å¼
2. åŒ¹é…æ¨èçš„å…³é”®è¯å¯†åº¦
3. åŠ å…¥ç‹¬ç‰¹è§’åº¦
4. å†…å®¹è´¨é‡è¶…è¶Šç«å“

[ç”Ÿæˆå­—æ®µå’Œè¾“å‡ºæ ¼å¼åŒå¿«é€Ÿæ¨¡å¼]
```

---

## ğŸ› é”™è¯¯å¤„ç†ç­–ç•¥

### Google Search API é”™è¯¯

```typescript
try {
  const results = await searchGoogleTopPages(keyword, 5, locale)
} catch (error) {
  if (error.message.includes('quota')) {
    return Response.json({
      error: 'Google æœç´¢ API é…é¢å·²ç”¨å®Œï¼Œè¯·ç¨åé‡è¯•æˆ–å‡çº§å¥—é¤'
    }, { status: 429 })
  }
  return Response.json({
    error: 'æœç´¢å¤±è´¥ï¼Œè¯·æ£€æŸ¥å…³é”®è¯æˆ–ç½‘ç»œè¿æ¥'
  }, { status: 500 })
}
```

### Jina Reader é”™è¯¯

```typescript
// éƒ¨åˆ†å¤±è´¥å¯ä»¥ç»§ç»­
const parsedPages = await readMultiplePages(urls)
const successCount = parsedPages.filter(p => !p.error).length

if (successCount === 0) {
  return Response.json({
    error: 'æ— æ³•è§£æä»»ä½•ç«å“ç½‘é¡µï¼Œè¯·ç¨åé‡è¯•'
  }, { status: 500 })
}

// è‡³å°‘æœ‰éƒ¨åˆ†æˆåŠŸï¼Œå¯ä»¥ç»§ç»­
if (successCount < urls.length) {
  console.warn(`åªæˆåŠŸè§£æäº† ${successCount}/${urls.length} ä¸ªç½‘é¡µ`)
}
```

### AI è°ƒç”¨é”™è¯¯

```typescript
try {
  const response = await fetch(aiConfig.baseUrl, { ... })
  if (!response.ok) {
    throw new Error(`AI API è¿”å› ${response.status}`)
  }
} catch (error) {
  return Response.json({
    error: 'AI ç”Ÿæˆå¤±è´¥ï¼Œè¯·æ£€æŸ¥ AI é…ç½®æˆ–ç¨åé‡è¯•',
    details: error.message
  }, { status: 500 })
}
```

---

## ğŸ“ˆ æ€§èƒ½ç›‘æ§

### å…³é”®æŒ‡æ ‡

```typescript
// åœ¨ API ä¸­è®°å½•
console.log(`[SEO ç”Ÿæˆ] æ€§èƒ½ç»Ÿè®¡:
  - æœç´¢: ${searchTime}ms
  - è§£æ: ${parseTime}ms
  - åˆ†æ: ${analysisTime}ms
  - ç”Ÿæˆ: ${generationTime}ms
  - æ€»è®¡: ${totalTime}ms
`)

// è¿”å›ç»™å‰ç«¯å±•ç¤º
return Response.json({
  performance: {
    searchTime,
    parseTime,
    analysisTime,
    generationTime,
    totalTime
  }
})
```

### é¢„æœŸæ€§èƒ½åŸºå‡†

| é˜¶æ®µ | å¿«é€Ÿæ¨¡å¼ | è´¨é‡æ¨¡å¼ |
|------|---------|---------|
| Google æœç´¢ | ~1ç§’ | ~1ç§’ |
| Jina è§£æ | ~3ç§’ | ~3ç§’ |
| AI åˆ†æ | - | ~4-6ç§’ |
| AI ç”Ÿæˆ | ~5-8ç§’ | ~4-6ç§’ |
| **æ€»è®¡** | **9-12ç§’** | **12-16ç§’** |

---

## ğŸ” æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•ç”¨ä¾‹ 1: çƒ­é—¨ç›Šæ™ºæ¸¸æˆ

```typescript
{
  mode: 'quality',
  gameTitle: 'Brain Challenge Pro',
  locale: 'en',
  mainKeyword: 'puzzle game',
  subKeywords: [
    'brain teaser',
    'logic puzzle',
    'mind game',
    'IQ test',
    'thinking game',
    'strategy puzzle',
    'casual game'
  ],
  originalGameInfo: {
    description: 'A challenging puzzle game with 100+ levels',
    category: 'Puzzle',
    tags: ['brain', 'logic', 'casual']
  },
  fields: ['controls', 'howToPlay', 'gameDetails', 'extras']
}
```

**é¢„æœŸç»“æœ**:
- æ‰¾åˆ° 5 ä¸ªç«å“
- æ‰€æœ‰ç«å“æˆåŠŸè§£æ
- ç”Ÿæˆ 4 ä¸ªå­—æ®µå†…å®¹
- ä¸»å…³é”®è¯å¯†åº¦ 2-3%
- æ€»å­—æ•° ~900 è¯
- åŒ…å«ç«å“åˆ†ææŠ¥å‘Š

---

### æµ‹è¯•ç”¨ä¾‹ 2: ä¸­æ–‡åŠ¨ä½œæ¸¸æˆ

```typescript
{
  mode: 'fast',
  gameTitle: 'è¶…çº§è‹±é›„å¤§æˆ˜',
  locale: 'zh',
  mainKeyword: 'åŠ¨ä½œæ¸¸æˆ',
  subKeywords: [
    'æ ¼æ–—',
    'å†’é™©',
    'è‹±é›„',
    'é—¯å…³',
    'å¤šäººå¯¹æˆ˜'
  ],
  originalGameInfo: {
    description: 'æ¿€çƒˆçš„åŠ¨ä½œæ ¼æ–—æ¸¸æˆ',
    category: 'Action'
  },
  fields: ['controls', 'howToPlay', 'gameDetails', 'extras']
}
```

**é¢„æœŸç»“æœ**:
- ä¸­æ–‡æœç´¢ç»“æœ
- ä¸­æ–‡å†…å®¹ç”Ÿæˆ
- å­—æ•°çº¦ ~540 è¯ï¼ˆä¸­æ–‡ä¹˜ 0.6ï¼‰
- å¿«é€Ÿæ¨¡å¼è€—æ—¶ < 12 ç§’

---

## ğŸ“š å‚è€ƒèµ„æº

### API æ–‡æ¡£

- **Google Custom Search**: https://developers.google.com/custom-search/v1/introduction
- **Jina AI Reader**: https://jina.ai/reader
- **OpenRouter**: https://openrouter.ai/docs

### SEO æœ€ä½³å®è·µ

- **å…³é”®è¯å¯†åº¦**: ä¸»å…³é”®è¯ 2-3%ï¼Œæ€»å…³é”®è¯ 5-8%
- **å†…å®¹é•¿åº¦**: 800-1500 è¯æœ€ä½³
- **æ ‡é¢˜ä¼˜åŒ–**: H2/H3 åŒ…å«å…³é”®è¯
- **è¯­ä¹‰ä¼˜åŒ–**: ä½¿ç”¨åŒä¹‰è¯å’Œç›¸å…³è¯

### ç›¸å…³æ–‡æ¡£

- [AI-CONFIG-IMPLEMENTATION-SUMMARY.md](./AI-CONFIG-IMPLEMENTATION-SUMMARY.md) - AI é…ç½®ç³»ç»Ÿ
- [DATABASE.md](./DATABASE.md) - æ•°æ®åº“æ¶æ„
- [ARCHITECTURE.md](./ARCHITECTURE.md) - é¡¹ç›®æ¶æ„

---

## ğŸš¦ å®æ–½æ£€æŸ¥æ¸…å•

### ç¯å¢ƒå‡†å¤‡

- [ ] Google API Key å·²é…ç½®
- [ ] Google Search Engine ID å·²é…ç½®
- [ ] Jina API Key å·²é…ç½®ï¼ˆå¯é€‰ï¼‰
- [ ] OpenRouter API Key æ­£å¸¸å·¥ä½œ
- [ ] ç¯å¢ƒå˜é‡å·²æ·»åŠ åˆ° .env.local

### ä»£ç å®ç°

- [ ] lib/google-search.ts å®Œæˆ
- [ ] lib/jina-reader.ts å®Œæˆ
- [ ] lib/seo-helpers.ts å®Œæˆ
- [ ] app/api/ai/batch-generate-seo/route.ts å®Œæˆ
- [ ] components/admin/games/BatchGenerateDialog.tsx æ›´æ–°å®Œæˆ

### åŠŸèƒ½æµ‹è¯•

- [ ] å¿«é€Ÿæ¨¡å¼æ­£å¸¸å·¥ä½œ
- [ ] è´¨é‡æ¨¡å¼æ­£å¸¸å·¥ä½œ
- [ ] Google æœç´¢æ­£å¸¸
- [ ] Jina è§£ææ­£å¸¸
- [ ] SEO åˆ†æå‡†ç¡®
- [ ] é”™è¯¯å¤„ç†å®Œå–„

### æ€§èƒ½æµ‹è¯•

- [ ] å¿«é€Ÿæ¨¡å¼ < 12 ç§’
- [ ] è´¨é‡æ¨¡å¼ < 16 ç§’
- [ ] å¹¶å‘æ”¯æŒæ­£å¸¸
- [ ] å†…å­˜ä½¿ç”¨åˆç†

### æ–‡æ¡£å’Œéƒ¨ç½²

- [ ] ä»£ç æ³¨é‡Šå®Œæ•´
- [ ] ç”¨æˆ·æ–‡æ¡£å®Œæˆ
- [ ] éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ
- [ ] éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

---

## ğŸ“ é—®é¢˜å’Œæ”¯æŒ

å¦‚æœåœ¨å®æ–½è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. **Google API é—®é¢˜** - æ£€æŸ¥ API Key å’Œé…é¢
2. **Jina è§£æé—®é¢˜** - æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œè€ƒè™‘æ·»åŠ é‡è¯•
3. **AI ç”Ÿæˆé—®é¢˜** - æ£€æŸ¥ Prompt å’Œæ¨¡å‹é€‰æ‹©
4. **æ€§èƒ½é—®é¢˜** - ä¼˜åŒ–å¹¶å‘æ•°å’Œå†…å®¹é•¿åº¦

---

**æ–‡æ¡£ç»´æŠ¤è€…**: AI Assistant
**æœ€åæ›´æ–°**: 2025-01-21
**ç‰ˆæœ¬**: v1.0
